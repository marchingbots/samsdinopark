<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Protected</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<nav class="navbar navbar-light bg-light px-3">
  <span class="navbar-brand">My App</span>
  <button id="logoutBtn" class="btn btn-outline-danger btn-sm">Log out</button>
</nav>

<div class="container mt-4">
  <h1>Protected Content Reminder</h1>
  <p>You are logged in.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://zdhzmbvxniimoqxtfiel.supabase.co";
const SUPABASE_KEY = "sb_publishable_RlxQGqfd3xyDGJN5KgoRYw_LKSp_FWd";

const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

(async () => {
  const { data } = await supabaseClient.auth.getSession();
  if (!data.session) {
    window.location.replace("/login.html");
  }
})();

document.getElementById("logoutBtn").onclick = async () => {
  await supabaseClient.auth.signOut();
  window.location.replace("/login.html");
};
</script>

</body>
</html>
